{"ast":null,"code":"/**\n * An implementation of the CAR reader interface that is backed by a blockstore.\n *\n * @typedef {import('multiformats').CID} CID\n * @typedef {import('@ipld/car/api').CarReader} CarReader\n * @implements {CarReader}\n */\nexport class BlockstoreCarReader {\n  /**\n   * @param {number} version\n   * @param {CID[]} roots\n   * @param {import('ipfs-car/blockstore').Blockstore} blockstore\n   */\n  constructor(version, roots, blockstore) {\n    /**\n     * @private\n     */\n    this._version = version;\n    /**\n     * @private\n     */\n\n    this._roots = roots;\n    /**\n     * @private\n     */\n\n    this._blockstore = blockstore;\n  }\n\n  get version() {\n    return this._version;\n  }\n\n  get blockstore() {\n    return this._blockstore;\n  }\n\n  async getRoots() {\n    return this._roots;\n  }\n  /**\n   * @param {CID} cid\n   */\n\n\n  has(cid) {\n    return this._blockstore.has(cid);\n  }\n  /**\n   * @param {CID} cid\n   */\n\n\n  async get(cid) {\n    const bytes = await this._blockstore.get(cid);\n    return {\n      cid,\n      bytes\n    };\n  }\n\n  blocks() {\n    return this._blockstore.blocks();\n  }\n\n  async *cids() {\n    for await (const b of this.blocks()) {\n      yield b.cid;\n    }\n  }\n\n}","map":{"version":3,"names":["BlockstoreCarReader","constructor","version","roots","blockstore","_version","_roots","_blockstore","getRoots","has","cid","get","bytes","blocks","cids","b"],"sources":["C:/Users/rishi/contract-poc/ThriEstate/Brandvilla/node_modules/nft.storage/src/bs-car-reader.js"],"sourcesContent":["/**\n * An implementation of the CAR reader interface that is backed by a blockstore.\n *\n * @typedef {import('multiformats').CID} CID\n * @typedef {import('@ipld/car/api').CarReader} CarReader\n * @implements {CarReader}\n */\nexport class BlockstoreCarReader {\n  /**\n   * @param {number} version\n   * @param {CID[]} roots\n   * @param {import('ipfs-car/blockstore').Blockstore} blockstore\n   */\n  constructor(version, roots, blockstore) {\n    /**\n     * @private\n     */\n    this._version = version\n    /**\n     * @private\n     */\n    this._roots = roots\n    /**\n     * @private\n     */\n    this._blockstore = blockstore\n  }\n\n  get version() {\n    return this._version\n  }\n\n  get blockstore() {\n    return this._blockstore\n  }\n\n  async getRoots() {\n    return this._roots\n  }\n\n  /**\n   * @param {CID} cid\n   */\n  has(cid) {\n    return this._blockstore.has(cid)\n  }\n\n  /**\n   * @param {CID} cid\n   */\n  async get(cid) {\n    const bytes = await this._blockstore.get(cid)\n    return { cid, bytes }\n  }\n\n  blocks() {\n    return this._blockstore.blocks()\n  }\n\n  async *cids() {\n    for await (const b of this.blocks()) {\n      yield b.cid\n    }\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,mBAAN,CAA0B;EAC/B;AACF;AACA;AACA;AACA;EACEC,WAAW,CAACC,OAAD,EAAUC,KAAV,EAAiBC,UAAjB,EAA6B;IACtC;AACJ;AACA;IACI,KAAKC,QAAL,GAAgBH,OAAhB;IACA;AACJ;AACA;;IACI,KAAKI,MAAL,GAAcH,KAAd;IACA;AACJ;AACA;;IACI,KAAKI,WAAL,GAAmBH,UAAnB;EACD;;EAEU,IAAPF,OAAO,GAAG;IACZ,OAAO,KAAKG,QAAZ;EACD;;EAEa,IAAVD,UAAU,GAAG;IACf,OAAO,KAAKG,WAAZ;EACD;;EAEa,MAARC,QAAQ,GAAG;IACf,OAAO,KAAKF,MAAZ;EACD;EAED;AACF;AACA;;;EACEG,GAAG,CAACC,GAAD,EAAM;IACP,OAAO,KAAKH,WAAL,CAAiBE,GAAjB,CAAqBC,GAArB,CAAP;EACD;EAED;AACF;AACA;;;EACW,MAAHC,GAAG,CAACD,GAAD,EAAM;IACb,MAAME,KAAK,GAAG,MAAM,KAAKL,WAAL,CAAiBI,GAAjB,CAAqBD,GAArB,CAApB;IACA,OAAO;MAAEA,GAAF;MAAOE;IAAP,CAAP;EACD;;EAEDC,MAAM,GAAG;IACP,OAAO,KAAKN,WAAL,CAAiBM,MAAjB,EAAP;EACD;;EAEU,OAAJC,IAAI,GAAG;IACZ,WAAW,MAAMC,CAAjB,IAAsB,KAAKF,MAAL,EAAtB,EAAqC;MACnC,MAAME,CAAC,CAACL,GAAR;IACD;EACF;;AAxD8B"},"metadata":{},"sourceType":"module"}