{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar car = require('@ipld/car');\n\nclass TreewalkCarJoiner {\n  constructor(cars) {\n    this._cars = Array.from(cars);\n    if (!this._cars.length) throw new Error('missing CARs');\n  }\n\n  async *car() {\n    const reader = this._cars[0];\n    const roots = await reader.getRoots();\n    const {\n      writer,\n      out\n    } = car.CarWriter.create(roots);\n\n    const writeCar = async () => {\n      const written = new Set();\n\n      const writeBlocks = async reader => {\n        for await (const b of reader.blocks()) {\n          if (written.has(b.cid.toString())) continue;\n          await writer.put(b);\n          written.add(b.cid.toString());\n        }\n      };\n\n      try {\n        await writeBlocks(reader);\n\n        for (const reader of this._cars.slice(1)) {\n          await writeBlocks(reader);\n        }\n      } catch (err) {\n        console.error(err);\n      } finally {\n        await writer.close();\n      }\n    };\n\n    writeCar();\n    yield* out;\n  }\n\n}\n\nexports.TreewalkCarJoiner = TreewalkCarJoiner;","map":{"version":3,"names":["Object","defineProperty","exports","value","car","require","TreewalkCarJoiner","constructor","cars","_cars","Array","from","length","Error","reader","roots","getRoots","writer","out","CarWriter","create","writeCar","written","Set","writeBlocks","b","blocks","has","cid","toString","put","add","slice","err","console","error","close"],"sources":["C:/Users/rishi/contract-poc/ThriEstate/Brandvilla/node_modules/carbites/cjs/lib/treewalk/joiner.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar car = require('@ipld/car');\n\nclass TreewalkCarJoiner {\n  constructor(cars) {\n    this._cars = Array.from(cars);\n    if (!this._cars.length)\n      throw new Error('missing CARs');\n  }\n  async *car() {\n    const reader = this._cars[0];\n    const roots = await reader.getRoots();\n    const {writer, out} = car.CarWriter.create(roots);\n    const writeCar = async () => {\n      const written = new Set();\n      const writeBlocks = async reader => {\n        for await (const b of reader.blocks()) {\n          if (written.has(b.cid.toString()))\n            continue;\n          await writer.put(b);\n          written.add(b.cid.toString());\n        }\n      };\n      try {\n        await writeBlocks(reader);\n        for (const reader of this._cars.slice(1)) {\n          await writeBlocks(reader);\n        }\n      } catch (err) {\n        console.error(err);\n      } finally {\n        await writer.close();\n      }\n    };\n    writeCar();\n    yield* out;\n  }\n}\n\nexports.TreewalkCarJoiner = TreewalkCarJoiner;\n"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;;AAEA,IAAIC,GAAG,GAAGC,OAAO,CAAC,WAAD,CAAjB;;AAEA,MAAMC,iBAAN,CAAwB;EACtBC,WAAW,CAACC,IAAD,EAAO;IAChB,KAAKC,KAAL,GAAaC,KAAK,CAACC,IAAN,CAAWH,IAAX,CAAb;IACA,IAAI,CAAC,KAAKC,KAAL,CAAWG,MAAhB,EACE,MAAM,IAAIC,KAAJ,CAAU,cAAV,CAAN;EACH;;EACS,OAAHT,GAAG,GAAG;IACX,MAAMU,MAAM,GAAG,KAAKL,KAAL,CAAW,CAAX,CAAf;IACA,MAAMM,KAAK,GAAG,MAAMD,MAAM,CAACE,QAAP,EAApB;IACA,MAAM;MAACC,MAAD;MAASC;IAAT,IAAgBd,GAAG,CAACe,SAAJ,CAAcC,MAAd,CAAqBL,KAArB,CAAtB;;IACA,MAAMM,QAAQ,GAAG,YAAY;MAC3B,MAAMC,OAAO,GAAG,IAAIC,GAAJ,EAAhB;;MACA,MAAMC,WAAW,GAAG,MAAMV,MAAN,IAAgB;QAClC,WAAW,MAAMW,CAAjB,IAAsBX,MAAM,CAACY,MAAP,EAAtB,EAAuC;UACrC,IAAIJ,OAAO,CAACK,GAAR,CAAYF,CAAC,CAACG,GAAF,CAAMC,QAAN,EAAZ,CAAJ,EACE;UACF,MAAMZ,MAAM,CAACa,GAAP,CAAWL,CAAX,CAAN;UACAH,OAAO,CAACS,GAAR,CAAYN,CAAC,CAACG,GAAF,CAAMC,QAAN,EAAZ;QACD;MACF,CAPD;;MAQA,IAAI;QACF,MAAML,WAAW,CAACV,MAAD,CAAjB;;QACA,KAAK,MAAMA,MAAX,IAAqB,KAAKL,KAAL,CAAWuB,KAAX,CAAiB,CAAjB,CAArB,EAA0C;UACxC,MAAMR,WAAW,CAACV,MAAD,CAAjB;QACD;MACF,CALD,CAKE,OAAOmB,GAAP,EAAY;QACZC,OAAO,CAACC,KAAR,CAAcF,GAAd;MACD,CAPD,SAOU;QACR,MAAMhB,MAAM,CAACmB,KAAP,EAAN;MACD;IACF,CApBD;;IAqBAf,QAAQ;IACR,OAAOH,GAAP;EACD;;AAjCqB;;AAoCxBhB,OAAO,CAACI,iBAAR,GAA4BA,iBAA5B"},"metadata":{},"sourceType":"script"}